#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <math.h>
#define LEN 100

void transform (double source[], double target [], int n, double (* pf) (double));
void show_double_array (double arr[], int n);
double add_2 (double n);
double sub_2 (double n);

int main (void)
{
	double s[LEN];
	double t[LEN];
	int i;

	srand ((unsigned int) time (0));
	for (i = 0; i < LEN; i++)
		s[i] = rand() % LEN + 1;
	printf ("original: \n");
	show_double_array (s, LEN);
	printf ("sin: \n");
	transform (s, t, LEN, sin);
	show_double_array (t, LEN);
	printf ("sqrt: \n");
	transform (s, t, LEN, sqrt);
	show_double_array (t, LEN);
	printf ("add_2: \n");
	transform (s, t, LEN, add_2);
	show_double_array (t, LEN);
	printf ("sub_2: \n");
	transform (s, t, LEN, sub_2);
	show_double_array (t, LEN);


	return 0;
}

void transform (double source[], double target[], int n, double (* pf) (double))
{
	for (int i = 0; i < n; ++i)
		target[i] = pf (source[i]);
}

void show_double_array (double arr[], int n)
{
	for (int i = 0; i < n; ++i)
	{
		printf ("%.2lf ", arr[i]);
		if ((i + 1) % 10 == 0)
			putchar ('\n');
	}
	putchar ('\n');
}

double add_2 (double n)
{
	return n + 2;
}
double sub_2 (double n)
{
	return n - 2;
}

/*

[alex@EX chapter14]$ ./a.out 
original: 
1.00 10.00 4.00 10.00 5.00 9.00 10.00 10.00 8.00 5.00 

sin: 
0.84 -0.54 -0.76 -0.54 -0.96 0.41 -0.54 -0.54 0.99 -0.96 

sqrt: 
1.00 3.16 2.00 3.16 2.24 3.00 3.16 3.16 2.83 2.24 

add_2: 
3.00 12.00 6.00 12.00 7.00 11.00 12.00 12.00 10.00 7.00 

sub_2: 
-1.00 8.00 2.00 8.00 3.00 7.00 8.00 8.00 6.00 3.00 

[alex@EX chapter14]$ !g
gcc -Wall -lm q15_11.c 
[alex@EX chapter14]$ ./a.out 
original: 
95.00 40.00 57.00 23.00 76.00 63.00 49.00 36.00 74.00 77.00 
87.00 44.00 68.00 76.00 36.00 96.00 89.00 29.00 75.00 44.00 
53.00 91.00 100.00 9.00 30.00 21.00 77.00 32.00 56.00 72.00 
27.00 2.00 64.00 35.00 76.00 39.00 49.00 24.00 26.00 22.00 
52.00 12.00 17.00 71.00 40.00 52.00 66.00 28.00 80.00 92.00 
24.00 84.00 34.00 23.00 44.00 16.00 95.00 20.00 47.00 3.00 
44.00 25.00 4.00 7.00 59.00 32.00 97.00 7.00 55.00 75.00 
80.00 7.00 86.00 96.00 77.00 25.00 99.00 95.00 5.00 30.00 
38.00 28.00 13.00 72.00 2.00 8.00 39.00 48.00 27.00 85.00 
50.00 22.00 61.00 6.00 80.00 19.00 37.00 77.00 77.00 43.00 

sin: 
0.68 0.75 0.44 -0.85 0.57 0.17 -0.95 -0.99 -0.99 1.00 
-0.82 0.02 -0.90 0.57 -0.99 0.98 0.86 -0.66 -0.39 0.02 
0.40 0.11 -0.51 0.41 -0.99 0.84 1.00 0.55 -0.52 0.25 
0.96 0.91 0.92 -0.43 0.57 0.96 -0.95 -0.91 0.76 -0.01 
0.99 -0.54 -0.96 0.95 0.75 0.99 -0.03 0.27 -0.99 -0.78 
-0.91 0.73 0.53 -0.85 0.02 -0.29 0.68 0.91 0.12 0.14 
0.02 -0.13 -0.76 0.66 0.64 0.55 0.38 0.66 -1.00 -0.39 
-0.99 0.66 -0.92 0.98 1.00 -0.13 -1.00 0.68 -0.96 -0.99 
0.30 0.27 0.42 0.25 0.91 0.99 0.96 -0.77 0.96 -0.18 
-0.26 -0.01 -0.97 -0.28 -0.99 0.15 -0.64 1.00 1.00 -0.83 

sqrt: 
9.75 6.32 7.55 4.80 8.72 7.94 7.00 6.00 8.60 8.77 
9.33 6.63 8.25 8.72 6.00 9.80 9.43 5.39 8.66 6.63 
7.28 9.54 10.00 3.00 5.48 4.58 8.77 5.66 7.48 8.49 
5.20 1.41 8.00 5.92 8.72 6.24 7.00 4.90 5.10 4.69 
7.21 3.46 4.12 8.43 6.32 7.21 8.12 5.29 8.94 9.59 
4.90 9.17 5.83 4.80 6.63 4.00 9.75 4.47 6.86 1.73 
6.63 5.00 2.00 2.65 7.68 5.66 9.85 2.65 7.42 8.66 
8.94 2.65 9.27 9.80 8.77 5.00 9.95 9.75 2.24 5.48 
6.16 5.29 3.61 8.49 1.41 2.83 6.24 6.93 5.20 9.22 
7.07 4.69 7.81 2.45 8.94 4.36 6.08 8.77 8.77 6.56 

add_2: 
97.00 42.00 59.00 25.00 78.00 65.00 51.00 38.00 76.00 79.00 
89.00 46.00 70.00 78.00 38.00 98.00 91.00 31.00 77.00 46.00 
55.00 93.00 102.00 11.00 32.00 23.00 79.00 34.00 58.00 74.00 
29.00 4.00 66.00 37.00 78.00 41.00 51.00 26.00 28.00 24.00 
54.00 14.00 19.00 73.00 42.00 54.00 68.00 30.00 82.00 94.00 
26.00 86.00 36.00 25.00 46.00 18.00 97.00 22.00 49.00 5.00 
46.00 27.00 6.00 9.00 61.00 34.00 99.00 9.00 57.00 77.00 
82.00 9.00 88.00 98.00 79.00 27.00 101.00 97.00 7.00 32.00 
40.00 30.00 15.00 74.00 4.00 10.00 41.00 50.00 29.00 87.00 
52.00 24.00 63.00 8.00 82.00 21.00 39.00 79.00 79.00 45.00 

sub_2: 
93.00 38.00 55.00 21.00 74.00 61.00 47.00 34.00 72.00 75.00 
85.00 42.00 66.00 74.00 34.00 94.00 87.00 27.00 73.00 42.00 
51.00 89.00 98.00 7.00 28.00 19.00 75.00 30.00 54.00 70.00 
25.00 0.00 62.00 33.00 74.00 37.00 47.00 22.00 24.00 20.00 
50.00 10.00 15.00 69.00 38.00 50.00 64.00 26.00 78.00 90.00 
22.00 82.00 32.00 21.00 42.00 14.00 93.00 18.00 45.00 1.00 
42.00 23.00 2.00 5.00 57.00 30.00 95.00 5.00 53.00 73.00 
78.00 5.00 84.00 94.00 75.00 23.00 97.00 93.00 3.00 28.00 
36.00 26.00 11.00 70.00 0.00 6.00 37.00 46.00 25.00 83.00 
48.00 20.00 59.00 4.00 78.00 17.00 35.00 75.00 75.00 41.00 



*/